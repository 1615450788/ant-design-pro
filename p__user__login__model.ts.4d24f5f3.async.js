(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{Vl52:function(t,e,n){"use strict";var r=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(n("MVZn")),u=r(n("o0o1")),o=n("7DNP"),i=n("WHbk"),c=n("sH+L"),s={namespace:"userLogin",state:{status:void 0},effects:{login:u.default.mark(function t(e,n){var r,a,s,p,l,f,d,h;return u.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.payload,a=n.call,s=n.put,t.next=4,a(i.fakeAccountLogin,r);case 4:return p=t.sent,t.next=7,s({type:"changeLoginStatus",payload:p});case 7:if("ok"!==p.status){t.next=22;break}if(l=new URL(window.location.href),f=(0,c.getPageQuery)(),d=f.redirect,!d){t.next=20;break}if(h=new URL(d),h.origin!==l.origin){t.next=18;break}d=d.substr(l.origin.length),d.match(/^\/.*#/)&&(d=d.substr(d.indexOf("#")+1)),t.next=20;break;case 18:return window.location.href=d,t.abrupt("return");case 20:return t.next=22,s(o.routerRedux.replace(d||"/"));case 22:case"end":return t.stop()}},t)}),getCaptcha:u.default.mark(function t(e,n){var r,a;return u.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.payload,a=n.call,t.next=4,a(i.getFakeCaptcha,r);case 4:case"end":return t.stop()}},t)})},reducers:{changeLoginStatus:function(t,e){var n=e.payload;return(0,c.setAuthority)(n.currentAuthority),(0,a.default)({},t,{status:n.status,type:n.type})}}},p=s;e.default=p},WHbk:function(t,e,n){"use strict";var r=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.fakeAccountLogin=i,e.getFakeCaptcha=s;var a=r(n("o0o1")),u=r(n("yXPU")),o=r(n("io9h"));function i(t){return c.apply(this,arguments)}function c(){return c=(0,u.default)(a.default.mark(function t(e){return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.default)("/api/login/account",{method:"POST",data:e}));case 1:case"end":return t.stop()}},t)})),c.apply(this,arguments)}function s(t){return p.apply(this,arguments)}function p(){return p=(0,u.default)(a.default.mark(function t(e){return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.default)("/api/login/captcha?mobile=".concat(e)));case 1:case"end":return t.stop()}},t)})),p.apply(this,arguments)}},"sH+L":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPageQuery=a,e.setAuthority=u;var r=n("Qyje");function a(){return(0,r.parse)(window.location.href.split("?")[1])}function u(t){var e="string"===typeof t?[t]:t;return localStorage.setItem("antd-pro-authority",JSON.stringify(e))}}}]);
//# sourceMappingURL=p__user__login__model.ts.4d24f5f3.async.js.map