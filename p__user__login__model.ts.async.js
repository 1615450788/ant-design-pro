(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{Vl52:function(t,e,n){"use strict";n.r(e);var r=n("p0pE"),a=n.n(r),c=n("d6i3"),o=n.n(c),i=n("7DNP"),u=n("1l/V"),s=n.n(u),p=n("io9h");function f(t){return l.apply(this,arguments)}function l(){return(l=s()(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(p.a)("/api/login/account",{method:"POST",data:e}));case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}function d(t){return h.apply(this,arguments)}function h(){return(h=s()(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(p.a)("/api/login/captcha?mobile=".concat(e)));case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}var w=n("Qyje");var g={namespace:"userLogin",state:{status:void 0},effects:{login:o.a.mark(function t(e,n){var r,a,c,u,s,p,l;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.payload,a=n.call,c=n.put,t.next=4,a(f,r);case 4:return u=t.sent,t.next=7,c({type:"changeLoginStatus",payload:u});case 7:if("ok"!==u.status){t.next=22;break}if(s=new URL(window.location.href),p=Object(w.parse)(window.location.href.split("?")[1]),!(l=p.redirect)){t.next=20;break}if(new URL(l).origin!==s.origin){t.next=18;break}(l=l.substr(s.origin.length)).match(/^\/.*#/)&&(l=l.substr(l.indexOf("#")+1)),t.next=20;break;case 18:return window.location.href=l,t.abrupt("return");case 20:return t.next=22,c(i.routerRedux.replace(l||"/"));case 22:case"end":return t.stop()}},t)}),getCaptcha:o.a.mark(function t(e,n){var r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.payload,a=n.call,t.next=4,a(d,r);case 4:case"end":return t.stop()}},t)})},reducers:{changeLoginStatus:function(t,e){var n,r,c=e.payload;return n=c.currentAuthority,r="string"==typeof n?[n]:n,localStorage.setItem("antd-pro-authority",JSON.stringify(r)),a()({},t,{status:c.status,type:c.type})}}};e.default=g}}]);